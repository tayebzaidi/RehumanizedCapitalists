<!DOCTYPE HTML>

<html>
	<head>
		<title>Ingredients</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />				
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.dropotron.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-layers.min.js"></script>
		<script src="js/init.js"></script>
		<script src="js/jquery-small.js"></script>
		<script src="js/recipes.js"></script>
		<script language="javascript">
                    
                    function replaceAll(find, replace, str) {
  return str.replace(new RegExp(find, 'g'), replace);
}
                        function getUrlVars() {
                            var vars = {};
                            var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                            vars[key] = value;
                            });
                            return vars;
                        }
                        
                        var url = window.location.href;
                        var index = url.indexOf("health=") + "health=".length;
                        console.log(replaceAll('%22','"', url.substring(index, url.length)));
                        var healthRestrictions = JSON.parse(replaceAll('%22','"', url.substring(index, url.length)));
                       // console.log(urlVars);
                        
			var ingredients = [];
			function formResults(){
				var ingredientSpace = document.getElementById("ingredientSpace");
				var ingredient = document.getElementById("ingredientInputBox");
                                console.log(ingredients);
				ingredients.push(ingredient.value);
				ingredientSpace.innerHTML += "<div>" + ingredient.value + "</div>";
				document.getElementById("ingredientInputBox").value = "";
			}
                        
                        function next() {
                            var url = "recipe.html?" + "health=" + JSON.stringify(healthRestrictions) +  "&ingredients=" + JSON.stringify(ingredients);
                            console.log(url);
                            document.location.href = url;
                        }
		</script>
		<link rel="stylesheet" href="css/ourstyle.css"/>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
	</head>
	
	<body>
		<div class="wrapper style1">
			<div id="header" style="background:black;">
				<div class="container">
				<nav id="nav">
					<ul>
						<li class="active"><a href="index.html">Home</a></li>
					</ul>
				</nav>
				</div>
			</div>
		</div>
		
		<div class="row">
			<!--Chats Sidebar-->
			<div class="ingredients-box">
				<div class="ingredients-header">
					<p>Your current ingredients:</p>
				</div>
				<div class="ingredients" id="ingredientSpace">
				</div>
				<div class="gather">
					<form name="ingredients" method="GET">
						<input type="text" name="inputbox" class="form-control" placeholder="Enter your ingredients here" id="ingredientInputBox"/>
						<input type="button" class="btn btn-primary" onclick="formResults()" value="Add" />
						<input type="button" class="btn btn-primary" onclick="next()" value="Next"/>
					</form>
				</div>
			</div>
		</div>
	</body>